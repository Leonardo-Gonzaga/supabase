---
title: Infinite List
description: List component with infinite scrolling capabilities using Supabase.
---

<BlockPreview name="infinite-list-demo" />

## Installation

<BlockItem
  name="infinite-list-nextjs"
  description="Installs the Infinite List component and necessary Supabase client setup for Next.js."
/>

## Folder structure

<RegistryBlock itemName="infinite-list-nextjs" />

## Introduction

The Infinite List component provides a scrollable container that loads data progressively from your Supabase database as the user scrolls down. It uses a custom hook to manage data fetching and pagination state, and allows flexible rendering via a `renderItem` prop.

## Prerequisites

1.  **Supabase Project:** You need a Supabase project set up.
2.  **Supabase Table:** A table in your Supabase database that you want to display.
3.  **Environment Variables:** Ensure your Next.js application has the following environment variables set up (usually in a `.env.local` file):
    ```env
    NEXT_PUBLIC_SUPABASE_URL=YOUR_SUPABASE_URL
    NEXT_PUBLIC_SUPABASE_ANON_KEY=YOUR_SUPABASE_ANON_KEY
    ```

## Usage

Import the `InfiniteList` component and provide the necessary props, including a function to render each item.

```tsx {1,4-6,10-12,18}
import { InfiniteList } from '@/registry/default/blocks/infinite-list/components/infinite-list'

// 1. Define your data type (matching your Supabase table structure)
type YourDataType = {
  id: number
  name: string
  // ... other columns
}

// 2. Define a function to render each item
const renderMyItem = (item: YourDataType) => {
  return (
    <div className="border p-2 rounded">
      <p>ID: {item.id}</p>
      <p>Name: {item.name}</p>
    </div>
  )
}

export default function MyPage() {
  return (
    <InfiniteList<YourDataType>
      tableName="your_supabase_table_name" // <-- Replace with your actual table name
      renderItem={renderMyItem} // Pass your render function
      pageSize={25} // Optional: Adjust the number of items fetched per page
      // selectQuery="id, name" // Optional: Specify columns to fetch
      // filterBuilder={(query) => query.order('name', { ascending: true })} // Optional: Add initial filters/sorting
    />
  )
}
```

## Features

- **Infinite Scrolling:** Automatically fetches more data as the user scrolls.
- **Supabase Integration:** Uses a custom hook to fetch data directly from your Supabase table.
- **Flexible Rendering:** Uses a `renderItem` prop to allow rendering any custom component for each list item.
- **Loading State:** Shows skeleton loaders while fetching data.
- **Customizable:** Accepts table name, page size, select query, filter builder, skeleton appearance, and end message props.

## Props

| Prop                   | Type                                                        | Description                                                                                                                         |
| ---------------------- | ----------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------- |
| `tableName`            | `string`                                                    | **Required.** The name of the Supabase table to fetch data from.                                                                    |
| `renderItem`           | `(item: TData, index: number) => React.ReactNode`           | **Required.** A function that receives an item and its index, returning the React node to render for that item.                     |
| `pageSize?`            | `number`                                                    | The number of rows to fetch per page. Defaults to `20`.                                                                             |
| `selectQuery?`         | `string`                                                    | The `select` string for the Supabase query (e.g., `'id, name, status'`). Defaults to `'*'`.                                         |
| `filterBuilder?`       | `(query: PostgrestFilterBuilder) => PostgrestFilterBuilder` | A function that receives the Supabase query builder (`PostgrestFilterBuilder`) and returns it after applying filters, sorting, etc. |
| `className?`           | `string`                                                    | Optional class name for the outer scrollable container `div`.                                                                       |
| `listClassName?`       | `string`                                                    | Optional class name for the inner `div` containing the list items.                                                                  |
| `skeletonCount?`       | `number`                                                    | Number of skeleton items to show while loading. Defaults to `3`.                                                                    |
| `skeletonHeightClass?` | `string`                                                    | Tailwind height class for skeleton items (e.g., `h-10`, `h-20`). Defaults to `h-10`.                                                |
| `endMessage?`          | `React.ReactNode`                                           | Content to display when the end of the list is reached. Defaults to `"You've reached the end."`.                                    |

## Customization

### Rendering Items

The primary customization happens via the `renderItem` prop. Define a function that takes your data item and returns the desired JSX for display.

```tsx
const renderProduct = (product: Product) => (
  <article className="flex gap-4">
    <img src={product.imageUrl} alt={product.name} className="w-16 h-16 object-cover" />
    <div>
      <h3 className="font-semibold">{product.name}</h3>
      <p className="text-sm text-muted-foreground">{product.description}</p>
      <p className="font-bold mt-1">${product.price.toFixed(2)}</p>
    </div>
  </article>
)

<InfiniteList<Product>
  tableName="products"
  renderItem={renderProduct}
/>
```

### Server-Side Filtering/Sorting

Use the `filterBuilder` prop to apply server-side filtering and sorting directly in the Supabase query.

```tsx
<InfiniteList
  tableName="posts"
  renderItem={renderPost}
  filterBuilder={
    (query) =>
      query
        .eq('published', true) // Filter by status
        .order('created_at', { ascending: false }) // Order by creation date
  }
/>
```

## Dependencies

- `@supabase/supabase-js`
- `@supabase/ssr` (for Next.js setup)
- `@supabase/postgrest-js`
- `lucide-react`
- `shadcn/ui` components (`skeleton`)
